<html>
<head>
    <link rel="stylesheet" href="pure.css">
</head>
<body>
<script>
var ws = new WebSocket("ws://127.0.0.1:9999/");
</script>

<form class="pure-form-stacked">
    <fieldset>
        <legend>A compact inline form</legend>

       <textarea cols="50" id="mytextarea"" ></textarea>



        <button onclick='sendmsg()' type="submit" class="pure-button pure-button-primary">Envoyer</button>
    </fieldset>
</form>
<script>
var ws = new WebSocket("ws://127.0.0.1:9999/");
ws.onopen = function() {
    function schedule(i) {
        setTimeout(function() { 
          ws.send('Hello from the client! (iteration ' + i + ')');
          schedule(i + 1);
        }, 1000);            
    };
    schedule(1);            
};
ws.onmessage = function (event) {
  console.log(event.data);
}

function sendmsg()
{
   var obj = document.getElementById("mytextarea")
   ws.send(obj.value)
}
</script>
</body>
</html>